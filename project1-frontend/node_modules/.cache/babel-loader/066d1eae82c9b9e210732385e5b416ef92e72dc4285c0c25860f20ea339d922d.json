{"ast":null,"code":"var _jsxFileName = \"/Users/josemarin/Desktop/project1/Group-1/project1-frontend/src/components/TransactionComponent/transaction-context.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useCallback } from \"react\";\nimport { fetchTransactionsApi, addTransactionApi, deleteTransactionApi, fetchUserAccountsApi } from \"./transaction-api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const TransactionContext = /*#__PURE__*/createContext();\nexport const TransactionProvider = ({\n  children\n}) => {\n  _s();\n  const [state, setState] = useState({\n    accounts: [],\n    selectedAccount: null,\n    transactions: [],\n    newTransaction: {\n      transactionDate: \"\",\n      amount: \"\",\n      description: \"\",\n      recurring: false,\n      recurringFrequency: \"\",\n      transactionType: \"\",\n      relatedTransactionId: \"\"\n    }\n  });\n  const handleInputChange = event => {\n    const {\n      name,\n      value,\n      type,\n      checked\n    } = event.target;\n    console.log(`Input change: ${name} = ${value}`);\n    setState(prevState => ({\n      ...prevState,\n      newTransaction: {\n        ...prevState.newTransaction,\n        [name]: type === \"checkbox\" ? checked : value\n      }\n    }));\n  };\n  const handleSubmit = event => {\n    event.preventDefault();\n    console.log(\"Submitting new transaction:\", state.newTransaction);\n    const accountString = localStorage.getItem(\"account\");\n    if (accountString) {\n      const account = JSON.parse(accountString);\n      var accountId = account.accountId;\n    }\n    const formattedTransaction = {\n      ...state.newTransaction,\n      transactionDate: new Date(state.newTransaction.transactionDate).toISOString().split(\"T\")[0],\n      account: {\n        accountId: accountId\n      }\n    };\n    addTransactionApi(accountId, formattedTransaction).then(response => {\n      console.log(\"Transaction added successfully:\", response.data);\n      setState(prevState => ({\n        ...prevState,\n        transactions: [...prevState.transactions, response.data],\n        newTransaction: {\n          transactionDate: \"\",\n          amount: \"\",\n          description: \"\",\n          recurring: false,\n          recurringFrequency: \"\",\n          transactionType: \"\",\n          relatedTransactionId: \"\"\n        }\n      }));\n    }).catch(error => {\n      console.error(\"There was an error creating the transaction.\", error);\n    });\n  };\n  const fetchTransactions = useCallback(accountId => {\n    console.log(`Fetching transactions for accountId: ${accountId}`);\n    fetchTransactionsApi(accountId).then(response => {\n      console.log(\"Fetched transactions:\", response.data);\n      setState(prevState => ({\n        ...prevState,\n        transactions: response.data\n      }));\n    }).catch(error => console.error(\"There was an error fetching the transactions.\", error));\n  }, []);\n  const fetchUserAccounts = useCallback(userId => {\n    console.log(`Fetching user accounts for userId: ${userId}`);\n    fetchUserAccountsApi(userId).then(response => {\n      console.log(\"Fetched user accounts:\", response.data);\n      setState(prevState => ({\n        ...prevState,\n        accounts: response.data\n      }));\n    }).catch(error => console.error(\"There was an error fetching the accounts.\", error));\n  }, []);\n  const handleAccountChange = event => {\n    const accountId = event.target.value;\n    console.log(`Account selected: ${accountId}`);\n    const selectedAccount = state.accounts.find(account => account.accountId === parseInt(accountId));\n    setState(prevState => ({\n      ...prevState,\n      selectedAccount\n    }));\n    fetchTransactions(accountId);\n  };\n  const deleteTransaction = transactionId => {\n    console.log(`Deleting transaction with ID: ${transactionId}`);\n    deleteTransactionApi(transactionId).then(response => {\n      console.log(`Transaction with ID ${transactionId} deleted.`);\n      setState(prevState => ({\n        ...prevState,\n        transactions: prevState.transactions.filter(transaction => transaction.transactionId !== transactionId)\n      }));\n    }).catch(error => {\n      console.error(\"There was an error deleting the transaction.\", error);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(TransactionContext.Provider, {\n    value: {\n      state,\n      fetchTransactions,\n      fetchUserAccounts,\n      deleteTransaction,\n      handleSubmit,\n      handleInputChange,\n      handleAccountChange\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 139,\n    columnNumber: 5\n  }, this);\n};\n_s(TransactionProvider, \"njrFpe1Rnfpbu78x6LCJxEFHLPA=\");\n_c = TransactionProvider;\nexport const useTransactionContext = () => {\n  _s2();\n  return useContext(TransactionContext);\n};\n_s2(useTransactionContext, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nvar _c;\n$RefreshReg$(_c, \"TransactionProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useCallback","fetchTransactionsApi","addTransactionApi","deleteTransactionApi","fetchUserAccountsApi","jsxDEV","_jsxDEV","TransactionContext","TransactionProvider","children","_s","state","setState","accounts","selectedAccount","transactions","newTransaction","transactionDate","amount","description","recurring","recurringFrequency","transactionType","relatedTransactionId","handleInputChange","event","name","value","type","checked","target","console","log","prevState","handleSubmit","preventDefault","accountString","localStorage","getItem","account","JSON","parse","accountId","formattedTransaction","Date","toISOString","split","then","response","data","catch","error","fetchTransactions","fetchUserAccounts","userId","handleAccountChange","find","parseInt","deleteTransaction","transactionId","filter","transaction","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","useTransactionContext","_s2","$RefreshReg$"],"sources":["/Users/josemarin/Desktop/project1/Group-1/project1-frontend/src/components/TransactionComponent/transaction-context.js"],"sourcesContent":["import React, { createContext, useContext, useState, useCallback } from \"react\";\nimport {\n  fetchTransactionsApi,\n  addTransactionApi,\n  deleteTransactionApi,\n  fetchUserAccountsApi,\n} from \"./transaction-api\";\n\nexport const TransactionContext = createContext();\n\nexport const TransactionProvider = ({ children }) => {\n  const [state, setState] = useState({\n    accounts: [],\n    selectedAccount: null,\n    transactions: [],\n    newTransaction: {\n      transactionDate: \"\",\n      amount: \"\",\n      description: \"\",\n      recurring: false,\n      recurringFrequency: \"\",\n      transactionType: \"\",\n      relatedTransactionId: \"\",\n    },\n  });\n\n  const handleInputChange = (event) => {\n    const { name, value, type, checked } = event.target;\n    console.log(`Input change: ${name} = ${value}`);\n    setState((prevState) => ({\n      ...prevState,\n      newTransaction: {\n        ...prevState.newTransaction,\n        [name]: type === \"checkbox\" ? checked : value,\n      },\n    }));\n  };\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    console.log(\"Submitting new transaction:\", state.newTransaction);\n    const accountString = localStorage.getItem(\"account\");\n    if (accountString) {\n      const account = JSON.parse(accountString);\n      var accountId = account.accountId;\n    }\n\n    const formattedTransaction = {\n      ...state.newTransaction,\n      transactionDate: new Date(state.newTransaction.transactionDate)\n        .toISOString()\n        .split(\"T\")[0],\n      account: { accountId: accountId },\n    };\n\n    addTransactionApi(accountId, formattedTransaction)\n      .then((response) => {\n        console.log(\"Transaction added successfully:\", response.data);\n        setState((prevState) => ({\n          ...prevState,\n          transactions: [...prevState.transactions, response.data],\n          newTransaction: {\n            transactionDate: \"\",\n            amount: \"\",\n            description: \"\",\n            recurring: false,\n            recurringFrequency: \"\",\n            transactionType: \"\",\n            relatedTransactionId: \"\",\n          },\n        }));\n      })\n      .catch((error) => {\n        console.error(\"There was an error creating the transaction.\", error);\n      });\n  };\n\n  const fetchTransactions = useCallback((accountId) => {\n    console.log(`Fetching transactions for accountId: ${accountId}`);\n    fetchTransactionsApi(accountId)\n      .then((response) => {\n        console.log(\"Fetched transactions:\", response.data);\n        setState((prevState) => ({\n          ...prevState,\n          transactions: response.data,\n        }));\n      })\n      .catch((error) =>\n        console.error(\"There was an error fetching the transactions.\", error)\n      );\n  }, []);\n\n  const fetchUserAccounts = useCallback((userId) => {\n    console.log(`Fetching user accounts for userId: ${userId}`);\n    fetchUserAccountsApi(userId)\n      .then((response) => {\n        console.log(\"Fetched user accounts:\", response.data);\n        setState((prevState) => ({\n          ...prevState,\n          accounts: response.data,\n        }));\n      })\n      .catch((error) =>\n        console.error(\"There was an error fetching the accounts.\", error)\n      );\n  }, []);\n\n  const handleAccountChange = (event) => {\n    const accountId = event.target.value;\n    console.log(`Account selected: ${accountId}`);\n    const selectedAccount = state.accounts.find(\n      (account) => account.accountId === parseInt(accountId)\n    );\n    setState((prevState) => ({\n      ...prevState,\n      selectedAccount,\n    }));\n    fetchTransactions(accountId);\n  };\n\n  const deleteTransaction = (transactionId) => {\n    console.log(`Deleting transaction with ID: ${transactionId}`);\n    deleteTransactionApi(transactionId)\n      .then((response) => {\n        console.log(`Transaction with ID ${transactionId} deleted.`);\n        setState((prevState) => ({\n          ...prevState,\n          transactions: prevState.transactions.filter(\n            (transaction) => transaction.transactionId !== transactionId\n          ),\n        }));\n      })\n      .catch((error) => {\n        console.error(\"There was an error deleting the transaction.\", error);\n      });\n  };\n\n  return (\n    <TransactionContext.Provider\n      value={{\n        state,\n        fetchTransactions,\n        fetchUserAccounts,\n        deleteTransaction,\n        handleSubmit,\n        handleInputChange,\n        handleAccountChange,\n      }}\n    >\n      {children}\n    </TransactionContext.Provider>\n  );\n};\n\nexport const useTransactionContext = () => {\n  return useContext(TransactionContext);\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}